<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>VUMC Service Countdown</title>
  <style>
    body {
      background: black;
      color: white;
      text-align: center;
      font-family: sans-serif;
      margin-top: 50px;
    }
    .countdown {
      font-size: 2.5em;
      margin-bottom: 20px;
    }
    .label {
      font-size: 1.5em;
      margin-bottom: 10px;
    }
    .live-button {
      padding: 15px 30px;
      font-size: 1.2em;
      border: none;
      border-radius: 8px;
      text-decoration: none;
    }
    .live {
      background-color: red;
      color: white;
    }
    .not-live {
      background-color: gray;
      color: white;
    }
  </style>
</head>
<body>

  <h1 id="serviceLabel">Next Service Starts In:</h1>
  <div class="label" id="serviceInfo">Loading...</div>
  <div class="countdown" id="countdown">Loading...</div>
  <a id="liveButton" class="live-button not-live" href="#" target="_blank">Service Not Online</a>

  <script>
    function getNextServiceTime() {
      const now = new Date();
      const day = now.getDay();
      const baseDate = new Date(now.getFullYear(), now.getMonth(), now.getDate());
      const services = [
        { label: "Traditional Worship", time: new Date(baseDate.getTime() + 9.5 * 3600000) }, // 9:30 AM
        { label: "Contemporary Worship", time: new Date(baseDate.getTime() + 10.5 * 3600000) } // 10:30 AM
      ];
      if (day !== 0) return null;
      for (let service of services) {
        if (service.time > now) return service;
      }
      return null;
    }

    function updateCountdown() {
      const now = new Date();
      const nextService = getNextServiceTime();
      const countdown = document.getElementById('countdown');
      const liveButton = document.getElementById('liveButton');
      const serviceInfo = document.getElementById('serviceInfo');

      if (!nextService) {
        countdown.innerText = "No More Services Today";
        serviceInfo.innerText = "";
        liveButton.innerText = "Service Not Online";
        liveButton.className = "live-button not-live";
        liveButton.href = "#";
        return;
      }

      const diff = nextService.time - now;

      const serviceDate = nextService.time.toLocaleDateString(undefined, { weekday: 'long', month: 'long', day: 'numeric' });
      const serviceTime = nextService.time.toLocaleTimeString(undefined, { hour: 'numeric', minute: '2-digit' });

      serviceInfo.innerText = `${nextService.label} – ${serviceDate} at ${serviceTime} EST`;

      if (diff <= 0) {
        countdown.innerText = "We're Live!";
        liveButton.innerText = "We Are Live →";
        liveButton.className = "live-button live";
        liveButton.href = "https://live.versaillesumc.org";
        return;
      }

      const hrs = Math.floor(diff / 1000 / 60 / 60);
      const mins = Math.floor((diff / 1000 / 60) % 60);
      const secs = Math.floor((diff / 1000) % 60);

      countdown.innerText = `${hrs}:${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
      liveButton.innerText = "Service Not Online";
      liveButton.className = "live-button not-live";
      liveButton.href = "#";
    }

    setInterval(updateCountdown, 1000);
    updateCountdown();
  </script>

</body>
</html>
